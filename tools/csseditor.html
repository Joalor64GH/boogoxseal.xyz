<!DOCTYPE html>
<html lang="en" style="background-color:rgb(17, 5, 29) ;">
<head>
	<title>CSS Editor - BOOGO x SEAL</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Boogo and Seal make Incredibox Mods and Tools.">
	<link rel="apple-touch-icon" sizes="180x180" href="../icons/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="../icons/favicon32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="../icons/favicon16x16.png">
	<link rel="manifest" href="../icons/site.webmanifest">
	<link rel="shortcut icon" href="../icons/favicon.ico">
	<meta name="msapplication-TileColor" content="#603cba">
	<meta name="msapplication-config" content="../icons/browserconfig.xml">
	<meta name="theme-color" content="#ffffff">
	<meta charset="UTF-8">
	<meta property="og:type" content="website">
	<meta property="og:site_name" content="BOOGO x SEAL">
	<meta property="og:title" content="CSS Editor" />
    <meta property="og:image" content="https://boogoxseal.xyz/assets/banner.png" />
    <meta property="twitter:image:src" content="https://boogoxseal.xyz/assets/banner.png" />
	<meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:description" content="Boogo and Seal make Incredibox Mods and Tools.">
    <meta name="og:image:alt" content="Boogo and Seal make Incredibox Mods and Tools.">
    <meta name="og:description" content="Boogo and Seal make Incredibox Mods and Tools.">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.3/css/bootstrap.min.css" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/topnav.css">
    <link rel="stylesheet" href="../css/overlay.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <script src="../js/general-functions.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js" integrity="sha512-XMVd28F1oH/O71fzwBnV7HucLxVwtxf26XV8P4wPk26EDxuGZ91N8bsOttmnomcCD3CS5ZMRL50H0GgOHvegtg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mdbassit/Coloris@latest/dist/coloris.min.css"/>
    <script src="https://cdn.jsdelivr.net/gh/mdbassit/Coloris@latest/dist/coloris.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js" integrity="sha512-CeIsOAsgJnmevfCi2C7Zsyy6bQKi43utIjdA87Q0ZY84oDqnI0uwfM9+bKiIkI75lUeI00WG/+uJzOmuHlesMA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas2svg"></script>
    <style>
        td{text-align:center}.th-custom{overflow:auto;font-weight:200;text-align:center;padding-left:5px;padding-right:5px;font-size:28px;margin:10px}body{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#fff;overflow:auto;font-family:monospace;font-weight:500;margin-top:15vh}
    </style>
    <script type='text/javascript' src='https://storage.ko-fi.com/cdn/widget/Widget_2.js'></script> 
</head>


<body style="background-color:rgb(17, 5, 29);">
    <div id="overlay" class="text-center visually-hidden">
        <img width="15%" class="position-absolute top-50 start-50 translate-middle" src="../assets/loading.gif"/>
    </div>
    <div class="topnav">
		<a href="../">Home</a>
		<a class="active" href="./">Tools</a>
		<a href="../mods">Mods</a>
		<a href="../about">About Us</a>
		<a href="https://sealldeveloper.github.io/incredibox-downloads-index/">Mod Index</a>
<a href='https://ko-fi.com/K3K3LWCC7' target='_blank'><img height='24' style='border:0px;height:24px;' src='https://storage.ko-fi.com/cdn/kofi3.png?v=3' alt='Buy Me a Coffee at ko-fi.com' /></a>
	  </div>
	<div class="container mt-3" style="background-color:rgb(29, 8, 49) ; overflow:hidden;	padding-bottom:40px;height:100%;" >
        <h1 class="m-4 mt-3">Incredibox 'CSS Editor'</h1>
        
        <div id="buildform">
            <h3 class="m-3">Uploads</h3>
            <small class="m-4" style="color:lightskyblue">Use CTRL+SHIFT+R to reset the form :></small>
            <div class="form-group col-md-5 m-3">
                <label for="stylemincss">style.min.css</label>
                <input class="form-control" type="file" id="stylemincss" accept="text/css"></input>
            </div>
            <h3 class="m-3">Options</h3>
            <div class="form-group col-md-5 m-4">
                <label for="iconamount">Checkmark Colour Editor</label>
                    <div class="row">
                        <div class="form-check m-3 col">
                            <label class="form-label" for="icon1">asset-v1 checkmark colour</label>
                            <input class="form-control" type="text" data-coloris id="icon1">
                        </div>
                        <div class="form-check m-3 col">
                            <label class="form-label" for="icon2">asset-v2 checkmark colour</label>
                            <input class="form-control" type="text" data-coloris id="icon2">
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-check m-3 col">
                            <label class="form-label" for="icon3">asset-v3 checkmark colour</label>
                            <input class="form-control" type="text" data-coloris id="icon3">
                        </div>
                        <div class="form-check m-3 col">
                            <label class="form-label" for="icon4">asset-v4 checkmark colour</label>
                            <input class="form-control" type="text" data-coloris id="icon4">
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-check m-3 col">
                            <label class="form-label" for="icon5">asset-v5 checkmark colour</label>
                            <input class="form-control" type="text" data-coloris id="icon5">
                        </div>
                        <div class="form-check m-3 col">
                            <label class="form-label" for="icon6">asset-v6 checkmark colour</label>
                            <input class="form-control" type="text" data-coloris id="icon6">
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-check m-3 col">
                            <label class="form-label" for="icon7">asset-v7 checkmark colour</label>
                            <input class="form-control" type="text" data-coloris id="icon7">
                        </div>
                        <div class="form-check m-3 col">
                            <label class="form-label" for="icon8">asset-v8 checkmark colour</label>
                            <input class="form-control" type="text" data-coloris id="icon8">
                        </div>
                    </div>
                <div id="icons"></div>
            </div>
            <div class="form-group m-4 mt-4" id="submit">
                <input class="btn btn-primary" type="submit" value="Submit and Generate" id="submissionbuild"></input>
            </div>
        </div>
	</div>
    <h3 style="padding-bottom:5px"></h3>
    
    <h3 style="text-align:center;font-size:10px">Made by <a style="font-size:10px"target="_blank" rel="noopener noreferrer" class="enter">seal</a></h3>
    <script>
        generatedelay=0
        currentlyrunningbuild=0
        submissioncheck=false
        css = ""
        function cssRulesfromContent(styleContent) {
            var doc = document.implementation.createHTMLDocument(""), 
            styleElement = document.createElement("style");

            styleElement.textContent = styleContent;
            // the style will only be parsed once it is added to a document
            doc.body.appendChild(styleElement);

            return styleElement.sheet.cssRules;
        };
        async function LoadTextFromDisk(input) {
            try{
                if (input.files && input.files[0]) {
                    var reader = new FileReader();
                    reader.readAsText(input.files[0]);
                    exit_val = ""
                    reader.onload = () => {
                        exit_val = reader.result;
                        return
                    };
                    await waitFor(_ => exit_val !== "")
                    return exit_val
                }  else {
                    return undefined
                }
            } catch (e) {
                console.log(e)
                return undefined
            }
        }

        async function build() {
            try{
                currentlyrunningbuild++
                vals = range(1,9)
                $('#icons').empty()
                newcss = await LoadTextFromDisk($('#stylemincss')[0])
                if (newcss !== undefined){
                    data1 = cssRulesfromContent(newcss)
                    exportdata = ""
                    for (var x in data1) {
                        try{
                            selector = data1[x].selectorText
                            if (selector.includes('#sp-select') && selector.includes('.bul') && selector.includes('.icon#icon')) {
                                iconid = Number(data1[x].selectorText.split('.icon#icon')[1].split(' ')[0])
                                cssbackground = data1[x].style['background-color'].split("(")[1].split(")")[0].split(' ').join('').split(',');
                                var b = cssbackground.map(function(x){             //For each array element
                                    x = parseInt(x).toString(16);      //Convert to a base16 string
                                    return (x.length==1) ? "0"+x : x;  //Add zero if we get only one character
                                })
                                hex = "#"+b.join('')
                                if ($(`#icon${iconid}`).val() === "") $(`#icon${iconid}`).val(hex)
                                document.querySelector(`#icon${iconid}`).dispatchEvent(new Event('input', { bubbles: true }));
                                data1[x].style['background-color'] = $(`#icon${iconid}`).val()
                            }
                            exportdata += data1[x].cssText+"\n"
                        } catch {}
                        css = exportdata
                    }
                }
                currentlyrunningbuild--
                generatedelay += submissioncheck ? 2 : 1
                return 
                
            } catch (e){console.log(e)}
            
        }
        function generate() {
            var cozette = new FontFace('CozetteVector', 'url(../webfonts/CozetteVector.otf)');
            cozette.load().then(async function(font){
                document.fonts.add(font);
                if (currentlyrunningbuild <= 0){
                    $('#submissionbuild').prop('disabled',true)
                    generatedelay=0
                    await build()
                    await waitFor(_ => generatedelay === 1)
                    $('#submissionbuild').prop('disabled',false)
                }
            })
        }
        $('#buildform').on('change', function(){
            generate()
        })
        function onload() {
            Coloris({
                alpha:false
            })
            window.addEventListener('DOMContentLoaded', async function() {
                generate()
                await waitFor(_ => generatedelay === 1)
            })
        }
        onload()
        $('#submissionbuild').on('click', async function(){
            overlay('show')
            submissioncheck=true
            value = await generate()
            await waitFor(_ => generatedelay === 2)
            var zip = new JSZip();
            zip.file(`style.min.css`, css, {base64:false})
            zip.generateAsync({type:"base64"}).then(function (base64) {
                window.open("data:application/zip;base64," + base64,'_blank')
            });
            submissioncheck=false
            overlay('hide')
        })
    </script>
</body>
</html>
