<!DOCTYPE html>
<html lang="en" style="background-color:rgb(17, 5, 29) ;">
<head>
	<title>App.js Generator - BOOGO x SEAL</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Boogo and Seal make Incredibox Mods and Tools.">
	<link rel="apple-touch-icon" sizes="180x180" href="../icons/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="../icons/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="../icons/favicon-16x16.png">
	<link rel="manifest" href="../icons/site.webmanifest">
	<link rel="shortcut icon" href="../icons/favicon.ico">
	<meta name="msapplication-TileColor" content="#603cba">
	<meta name="msapplication-config" content="../icons/browserconfig.xml">
	<meta name="theme-color" content="#ffffff">
	<meta charset="UTF-8">
	<meta property="og:type" content="website">
	<meta property="og:site_name" content="BOOGO x SEAL">
	<meta property="og:title" content="App.js Generator" />
    <meta property="og:image" content="https://boogoxseal.xyz/assets/banner.png" />
    <meta property="twitter:image:src" content="https://boogoxseal.xyz/assets/banner.png" />
	<meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:description" content="Boogo and Seal make Incredibox Mods and Tools.">
    <meta name="og:image:alt" content="Boogo and Seal make Incredibox Mods and Tools.">
    <meta name="og:description" content="Boogo and Seal make Incredibox Mods and Tools.">
    <link rel="stylesheet" href="../css/all.css"/>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.3/css/bootstrap.min.css" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/topnav.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mdbassit/Coloris@latest/dist/coloris.min.css"/>
    <script src="https://cdn.jsdelivr.net/gh/mdbassit/Coloris@latest/dist/coloris.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/terser@5.19.2/dist/bundle.min.js"></script>
    <script src="../js/general-functions.js"></script>

    <style>
        td{text-align:center}.th-custom{overflow:auto;font-weight:200;text-align:center;padding-left:5px;padding-right:5px;font-size:28px;margin:10px}body{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#fff;overflow:auto;font-family:monospace;font-weight:500;margin-top:15vh}
    </style>
</head>



<body style="background-color:rgb(17, 5, 29) ;">
    <div class="topnav">
		<a href="../">Home</a>
		<a class="active" href="./">Tools</a>
		<a href="../mods">Mods</a>
		<a href="../about">About Us</a>
		<a href="https://sealldeveloper.github.io/incredibox-downloads-index/">Mod Index</a>
	  </div>
	<div class="container mt-3" style="background-color:rgb(29, 8, 49) ; overflow:hidden;	padding-bottom:40px;height:100%;" >
        <style id="button-preview">
            #playbutton{transition:.2s;background-color:#000;border-color:#000;width:100px;height:100px}#playbutton:hover{border-color:#f0f;background-color:#f0f}
            ::placeholder {color: #e2e2e2 !important;}
            :-ms-input-placeholder {color: #e2e2e2 !important;}
            ::-ms-input-placeholder {color: #e2e2e2 !important;}
            </style>
            <h1 class="m-4">Incredibox 'app.js' Generator</h1>
            <br>
            <div class="m-3">
                <h2>Import (optional)</h2>
                <small id="import-comment" style="color:#999999" class="form-text m-1">This will attempt to parse an existing app.js and put it in the builder to be modified! This is should be able to process all app.js files.</small>
                <br>
                <div class="m-2">
                    <label for="appjs-import">App.js File</label>
                    <br>
                    <div class="col-md-3">
                        <input id="appjs-import" class="form-control" type="file"></input>
                    </div>
                    <div class="form-group m-2" id="import-button">
                        <input class="btn btn-primary" type="submit" value="Import App.js" id="import-input"></input>
                        <input class="btn btn-danger" type="submit" value="Clear All Fields" id="clear-input"></input>
                    </div>
                </div>
            </div>
            <br>
            <br>
            <h2 class="m-2">Builder</h2>
            <div class="form-group position-relative" id="metadata">
                <h3 class="m-3">Metadata</h3>
                <div class="form-group col-md-5 m-4">
                    <label for="name">Name</label>
                    <input class="form-control" type="text" id="name" placeholder="Name" required="true"></input>
                </div>
                <div class="form-group col-md-5 m-4">
                    <label for="version">Version</label> 
                    <select id="version" class="form-control form-select" required="true">
                        <optgroup>
                            <option value="1" selected="">1 (Alpha)</option>
                            <option value="2">2 (Little Miss)</option>
                            <option value="3">3 (Sunrise)</option>
                            <option value="4">4 (The Love)</option>
                            <option value="5">5 (Brazil)</option>
                            <option value="6">6 (Alive)</option>
                            <option value="7">7 (Jeevan)</option>
                            <option value="8">8 (Dystopia)</option>
                            <option value="9">9 (Wekiddy)</option>
                        </optgroup>
                    </select>
                </div>
                <div class="form-group col-md-5 m-4">
                    <label for="date">Year of release</label>  
                    <input class="form-control" type="number" id="date" placeholder="2023" required="true"></input>
                </div>
                <div class="form-group col-md-5 m-4">
                    <label for="folder">Mod Folder</label>
                    <input class="form-control" type="text" id="folder" placeholder="asset-v1/" required="true"></input>
                </div>
            </div>
            <div class="form-group" id="music">
                <h3 class="m-3">Music</h3>
                <div class="form-group col-md-5 m-4">
                    <label for="looptime">The length of one loop (in milliseconds)</label>
                    <input class="form-control" type="number" id="looptime" placeholder="6857" required="true"></input>
                </div>
                <div class="form-group col-md-5 m-4">
                    <label for="bpm">Beats per minute (BPM)</label>  
                    <input class="form-control" type="number" id="bpm" placeholder="100" required="true"></input>
                    <small id="bpm-comment" style="color:#999999" class="form-text"><b>This is purely informational and has no effect.</b></small>
                </div>
            </div>
            <div class="form-group" id="animations">
                <h3 class="m-3">Animations</h3>
                <div class="form-group col-md-5 m-4">
                    <label for="totalframe">How many frames will the Polos have in their animation? (Based off the 'Loop Time')</label> 
                    <input class="form-control" type="number" id="totalframe" disabled="true"></input>
                </div>
            </div>
            <div class="form-group col-md-5 m-4">
                <label for="bonusendloopA">Should the bonus always end at the end of loop B?</label>
                <select id="bonusendloopA" class="form-control form-select" required="true">
                    <optgroup>
                        <option value="!1">True</option>
                        <option value="!0" selected="">False</option>
                    </optgroup>
                </select>
            </div>
            <div class="form-group" id="colors">
                <h3 class="m-3">Colours</h3>
                <div class="form-group col-md-5 m-4">
                    <label for="colBck">Colour of the background, if the image fails to load its the reserve, it also replaces the transparent pixels of the loaded background with this colour.</label>
                    <br>
                    <input class="form-control" type="text" data-coloris id="colBck" required="true" value="#000000"></input>
                </div>
                <div class="form-group col-md-5 m-4">
                    <label for="col0">Colour of the text</label>
                    <br>
                    <input class="form-control" type="text" data-coloris id="col0" required="true" value="#000000"></input>
                </div>
                <div class="form-group col-md-5 m-4">
                    <label for="col1">Colour of the buttons background colour</label>
                    <br>
                    <input class="form-control" type="text" data-coloris id="col1" required="true" value="#ff00ff"></input>
                </div>
                <div class="form-group col-md-5 m-4">
                    <label for="col2">Colour of the unhovered button background</label>
                    <br>
                    <input class="form-control" type="text" data-coloris id="col2" required="true" value="#000000"></input>
                    <br>
                    <small id="col2-comment" style="color:#999999" class="form-text">This is visible in the 'Playlist' menu.</small>
                </div>
                <div class="form-group col-md-7 m-4">
                    <label for="col3">Colour of the loading bar, unselected menu tab background colour and the hovered button colour</label>
                    <input class="form-control" type="text" data-coloris id="col3" required="true" value="#000000"></input>
                </div>
                <div class="form-group col-md-4 m-4">
                    <label for="col4">Colour the selected menu button's icon</label>
                    <input class="form-control" type="text" data-coloris id="col4" required="true" value="#000000"></input>
                    <br>
                    <small id="col4-comment" style="color:#999999" class="form-text">This is visible in the 'Playlist' menu when selecting 'My Mix'.</small>
                </div>
                <div class="form-group m-4">
                    <label>Renders of menu items</label>
                    <br>
                    <small id="renders-comment" style="color:#999999" class="form-text m-2">These are based off the colours selected above, they are not perfect but close to ingame menu assets.</small>
                    <br>
                    <canvas class="m-3" id="loadingbar" width="200" height="20"></canvas>
                    <br>
                    <button class="btn p-5 rounded-circle btn-lg m-3" style="position: relative;" id="playbutton">
                        <i class='fa-solid fa-caret-right fa-3x' style='color:#ffffff;position: absolute;top: 50%;left: 50%;transform: translate(-50%, -50%);'></i>
                    </button>
                    <button class="btn p-5 rounded-circle btn-lg m-3" style="position: relative;" id="playbutton">
                        <i class='fa-solid fa-sharp fa-list-music fa-2x' style='color:#ffffff;position: absolute;top: 50%;left: 50%;transform: translate(-50%, -50%);'></i>
                        
                    </button>
                    <button class="btn p-5 rounded-circle btn-lg m-3" style="position: relative;" id="playbutton">
                        <i class='fa-solid fa-arrow-right-arrow-left fa-2x' style='color:#ffffff;position: absolute;top: 50%;left: 50%;transform: translate(-50%, -50%);'></i>
                        
                    </button>
                    <br>
                    <div id="renders-mymix-buttons" class="container m-3" style="width:50%">
                        <div class="row">
                            <div class="col"></div>
                            <div class="col"></div>
                            <div class="col"></div>
                            <div id="renders-mymix-mymixbutton" class="col" style="font-size:20px; text-align:center;padding-right:20px;padding:15px;border-radius: 10px 10px 0px 0px;background-color:#ff00ff"><i class='fa-sharp fa-solid fa-list-music' id="mymix-button-icon" style='color:#000000'></i> MY MIX</div>
                        </div>
                        <div id="renders-mymix-row" class="row" style="background-color:#ff00ff;padding:15px">
                            <div id="renders-mymix-mymixbutton2" class="col" style="font-size:15px;text-align:center;padding-bottom:2px;padding-top:2px;border-radius: 20px;background-color:#000000;color:#ffffff"><i class='fa-solid fa-user fa-sm'></i> MY MIX</div>
                            <br>
                            <div id="renders-mymix-favbutton" class="col" style="font-size:15px;text-align:center;padding-bottom:2px;padding-top:2px;border-radius: 20px;background-color:#000000;color:#ff00ff"><i class='fa-sharp fa-solid fa-star-sharp fa-sm'></i> MY FAV</div>
                            <div class="col"></div>
                            <div class="col"></div>
                            <div class="col"></div>
                        </div>
                    </div>

                </div>
            </div>
            <div class="form-group" id="polos">
                <h3 class="m-3">Polos</h3>
                <div class="form-group col-md-5 m-4">
                    <label for="polocount">How many polos do you want?</label>
                    <input class="form-control" type="number" max="99" min="1" id="polocount" placeholder="20" required="true"></input>
                    <small id="polocount-comment" style="color:#999999" class="form-text">Between 1 and 99 polos! (Generally 20)</b></small>
                </div>
                <div class="form-group col-md-5 m-4 visually-hidden" id="poloselector">
                    <label for="poloselect">Polo Selector</label>
                    <select class="form-control form-select" id="poloselect">
                        <optgroup id="polo-options">
                        </optgroup>
                    </select>
                </div>
                <div id="pololist">

                </div>
            </div>
            <div class="form-group" id="bonuses">
                <h3 class="m-3">Bonuses</h3>
                <small id="bonusescontent-comment" style="color:#999999" class="form-text m-3">You must first set your amount of polos, then you can edit bonuses.</small>
                <div class="form-group col-md-5 m-4 visually-hidden" id="bonuses-content">
                    <label for="bonusselect">How many bonuses do you want?</label>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="bonusesRadio" id="0bonuses" value="0" checked>
                        <label class="form-check-label" for="0bonuses">
                          0 bonuses
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="bonusesRadio" id="1bonuses" value="1">
                        <label class="form-check-label" for="1bonuses">
                          1 bonus
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="bonusesRadio" id="2bonuses" value="2">
                        <label class="form-check-label" for="2bonuses">
                          2 bonuses
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="bonusesRadio" id="3bonuses" value="3">
                        <label class="form-check-label" for="3bonuses">
                          3 bonuses
                        </label>
                    </div>
                </div>
                <div class="form-group col-md-5 m-4 visually-hidden" id="bonusselector">
                    <label for="bonusselect">Bonus Selector</label>
                    <select class="form-control form-select" id="bonusselect">
                        <optgroup id="bonus-options">
                        </optgroup>
                    </select>
                </div>
                <div class="form-group m-3 visually-hidden" id="bonusedit1">
                   <div class="form-group m-3">
                        <label for="bonusname1">Bonus Name</label>
                        <input class="form-control" type="text" id="bonusname1" placeholder="Name"></input>
                   </div>
                   <div class="form-group m-3">
                        <label for="bonussrc1">Bonus Video Source File</label>
                        <input class="form-control" type="text" id="bonussrc1" placeholder="video.mp4"></input>
                    </div>
                    <div class="form-group m-3">
                        <label for="bonuscode">Bonus Polo Code</label>
                        <small id="bonuscode-comment" style="color:#999999" class="form-text">Note: Limit this to <b>only selecting 5</b>.</small>
                        <div class="form-control bonus-polo-code" id="bonuspolocode1">
                        </div>
                   </div>
                    <div class="form-group m-3">
                        <label for="bonussound1">Bonus Sound Source File</label>
                        <input class="form-control" type="text" id="bonussound1" placeholder="bonus"></input>
                    </div>
                    <div class="form-group m-3">
                        <label for="bonusaspire1">Bonus Aspire Source File</label>
                        <input class="form-control" type="text" id="bonusaspire1" placeholder="aspire"></input>
                        <small id="bonusaspire-comment" style="color:#999999" class="form-text">An aspire is the small audio file that plays just before the bonus starts</small>
                    </div>
                </div>
                <div class="form-group m-3 visually-hidden" id="bonusedit2">
                    <div class="form-group m-3">
                         <label for="bonusname2">Bonus Name</label>
                         <input class="form-control" type="text" id="bonusname2" placeholder="Name"></input>
                    </div>
                    <div class="form-group m-3">
                         <label for="bonussrc2">Bonus Video Source File</label>
                         <input class="form-control" type="text" id="bonussrc2" placeholder="video.mp4"></input>
                     </div>
                     <div class="form-group m-3">
                         <label for="bonuscode2">Bonus Polo Code</label>
                         <small id="bonuscode-comment" style="color:#999999" class="form-text">Note: Limit this to <b>only selecting 5</b>.</small>
                         <div class="form-control bonus-polo-code" id="bonuspolocode2">
                        </div>
                    </div>
                     <div class="form-group m-3">
                         <label for="bonussound2">Bonus Sound Source File</label>
                         <input class="form-control" type="text" id="bonussound2" placeholder="bonus"></input>
                     </div>
                     <div class="form-group m-3">
                         <label for="bonusaspire2">Bonus Aspire Source File</label>
                         <input class="form-control" type="text" id="bonusaspire2" placeholder="aspire"></input>
                         <small id="bonusaspire-comment" style="color:#999999" class="form-text">An aspire is the small audio file that plays just before the bonus starts</small>
                     </div>
                 </div>
                 <div class="form-group m-3 visually-hidden" id="bonusedit3">
                    <div class="form-group m-3">
                         <label for="bonusname3">Bonus Name</label>
                         <input class="form-control" type="text" id="bonusname3" placeholder="Name"></input>
                    </div>
                    <div class="form-group m-3">
                         <label for="bonussrc3">Bonus Video Source File</label>
                         <input class="form-control" type="text" id="bonussrc3" placeholder="video.mp4"></input>
                     </div>
                     <div class="form-group m-3">
                         <label for="bonuscode3">Bonus Polo Code</label>
                         <small id="bonuscode-comment" style="color:#999999" class="form-text">Note: Limit this to <b>only selecting 5</b>.</small>
                         <div class="form-control bonus-polo-code" id="bonuspolocode3">
                        </div>
                    </div>
                     <div class="form-group m-3">
                         <label for="bonussound3">Bonus Sound Source File</label>
                         <input class="form-control" type="text" id="bonussound3" placeholder="bonus"></input>
                     </div>
                     <div class="form-group m-3">
                         <label for="bonusaspire3">Bonus Aspire Source File</label>
                         <input class="form-control" type="text" id="bonusaspire3" placeholder="aspire"></input>
                         <small id="bonusaspire-comment" style="color:#999999" class="form-text">An aspire is the small audio file that plays just before the bonus starts</small>
                     </div>
                 </div>
            </div>
            <div class="form-group" id="advanced">
                <h3 class="m-3">Advanced Options</h3>
                <div class="form-check m-3" >
                    <label class="form-check-label" for="enableadvanced"><b style="color:lightcoral">OPTIONAL:</b> I understand these options are not typically needed to be changed and can mess with shit</label>
                    <input class="form-check-input" type="checkbox" id="enableadvanced"></input>
                </div>
                <div class="form-group col-md-5 m-4 visually-hidden advanced-option">
                    <label for="nbpolo">Number of Polos allowed at once</label>
                    <input class="form-control" type="number" id="nbpolo" value="7" placeholder="7"></input>
                </div>
                <div class="form-group col-md-5 m-4 visually-hidden advanced-option">
                    <label for="nbloopbonus">Length of a Bonus (in loops)</label>
                    <input class="form-control" type="number" id="nbloopbonus" value="6" placeholder="6"></input>
                </div>
                <div class="form-group col-md-5 m-4 visually-hidden advanced-option">
                    <label for="bonusloopA">this.bonusloopA (currently unknown usage)</label>
                    <select id="bonusloopA" class="form-control form-select">
                        <optgroup>
                            <option value="!1">True</option>
                            <option value="!0" selected="">False</option>
                        </optgroup>
                    </select>
                </div>
                <div class="form-group col-md-5 m-4 visually-hidden advanced-option">
                    <label for="spritepolo">The name of the polo sprite file</label>
                    <input class="form-control" type="text" id="spritepolo" value="polo-sprite.png" placeholder="polo-sprite.png"></input>
                </div>
                <div class="form-group col-md-5 m-4 visually-hidden advanced-option">
                    <label for="spritepicto">The name of the icons sprite file</label>
                    <input class="form-control" type="text" id="spritepicto" value="game-picto.png" placeholder="game-picto.png"></input>
                </div>
                <div class="form-group col-md-5 m-4 visually-hidden advanced-option">
                    <label for="recmaxloop">Maximum amount of loops in a recording</label>
                    <input class="form-control" type="number" id="recmaxloop" placeholder="27" value="27"></input>
                </div>
                <div class="form-group col-md-5 m-4 visually-hidden advanced-option">
                    <label for="recminloop">Minimum amount of loops in a recording</label>
                    <input class="form-control" type="number" id="recminloop" placeholder="4" value="4"></input>
                </div>
            </div>
            <div class="form-group m-4 mt-4" id="submit">
                <input class="btn btn-primary" type="submit" value="Submit and Export App.js" id="submission"></input>
                <small id="submit-comment" style="color:#999999" class="form-text">Make sure you've set <b>all your polos!</b></small>
            </div>
        <script>
            // Variables
            var last_valid_selection = [[],[],[]];
            

            // General functions
            function download(filename, text) {
                var pom = document.createElement('a');
                pom.setAttribute('href', 'data:text/plain;charset=utf8,' + encodeURIComponent(text));
                pom.setAttribute('download', filename);
    
                if (!document.createEvent) return pom.click();
                var event = document.createEvent('MouseEvents');
                event.initEvent('click', true, true);
                pom.dispatchEvent(event);
            }
            function LoadTextFromDisk(input, callback) {
            try{
                if (input.files && input.files[0]) {
                    var reader = new FileReader();
                    reader.readAsText(input.files[0]);
                    reader.onload = () => {
                        callback(reader.result);
                    };
                }  else {
                    callback(undefined)
                }
            } catch (e) {
                console.log(e)
            }
        }
            

            // Math and Advanced Options
            $('#looptime').on('change', function(){
                totalframecalc=Math.floor(Number($(this).val())*0.024)*2
                $('#totalframe').val(totalframecalc)
            })
            
            $('#enableadvanced').change(function(){
                var options = $('.advanced-option');
                var classType = ($('#enableadvanced:checked').length !== 0) ? 'r' : 'a'
                for (const o of options) {
                    modifyClass(classType, 'visually-hidden', o)
                }
            })
            
            // Colours and renders
            function loadbar(val) {
                var loadingbar = document.getElementById('loadingbar')
                var ctx = loadingbar.getContext('2d')
                ctx.beginPath()
                ctx.moveTo(9, 0)
                ctx.lineTo(192,0)
                ctx.moveTo(9, 20)
                ctx.lineTo(192,20)
                ctx.closePath()
                ctx.strokeStyle = val;
                ctx.stroke();
    
                ctx.beginPath();
                ctx.arc(10, 10, 10, 0.5*Math.PI, 1.5* Math.PI);
                ctx.stroke();
    
                ctx.beginPath();
                ctx.arc(188, 10, 10, 1.5*Math.PI, 0.5* Math.PI);
                ctx.stroke();
    
                ctx.beginPath()
                ctx.moveTo(11, 5)
                ctx.rect(10,5,70,10)
                ctx.closePath()
                ctx.fillStyle = val;
                ctx.fill()
                ctx.stroke();
    
                ctx.beginPath()
                ctx.arc(10,10, 5, 0.5*Math.PI, 1.5* Math.PI);
                ctx.closePath()
                ctx.fill()
                ctx.beginPath()
                ctx.arc(80,10, 5, 1.5*Math.PI, 0.5* Math.PI);
                ctx.closePath()
                ctx.fill()
                ctx.stroke();
            }
            
            function colourUpdate() {
                $('#button-preview').html(`#playbutton{transition:.2s;background-color:${$(col1).val()};border-color:${$(col1).val()};width:100px;height:100px}#playbutton:hover{border-color:${$(col3).val()};background-color:${$(col3).val()}}`)
                $('#renders-mymix-mymixbutton').attr('style',`font-size:20px; text-align:center;padding-right:20px;padding:15px;border-radius: 10px 10px 0px 0px;background-color:${$(col1).val()}`)
                $('#renders-mymix-row').attr('style',`background-color:${$(col1).val()};padding:15px`)
                $('#renders-mymix-favbutton').attr('style',`font-size:15px;text-align:center;padding-bottom:2px;padding-top:2px;border-radius: 20px;background-color:${$(col2).val()};color:${$(col1).val()}`)
                $('#renders-mymix-mymixbutton2').attr('style',`font-size:15px;text-align:center;padding-bottom:2px;padding-top:2px;border-radius: 20px;background-color:${$(col3).val()};color:#ffffff`)
                loadbar($(col3).val())
                $('#mymix-button-icon').attr('style',`color:${$(col4).val()}`)
            }
            
            $('#colors').on('change', function(){
                colourUpdate()
            })
            
            $('#playbutton').on('click', function(){
                return false
            })
    

            // Bonuses
            function bonusUpdate(val) {
                temp_selection=[]
                polocount = Number($('#polocount').val())
                allpolos=makeArray(polocount)
                for (var a in allpolos) {
                    if (!$(`#${a}polo-${val}`).is(':checked')) continue
                    id = $(`#${a}polo-${val}`).attr('id')
                    id = id.replace(`polo-${val}`,'')
                    temp_selection.push(id)
                }
                if (temp_selection.length > 5) {
                    alert('You can\'t select more than 5 polos for a bonus!')
                    for (var a in allpolos) {
                        a++
                        checked = (last_valid_selection[Number(val)-1].includes(a.toString())) ? true : false
                        $(`#${a}polo-${val}`).prop('checked',checked)
                    }
                } else {
                    last_valid_selection[Number(val)-1]=[]
                    for (const t in temp_selection) last_valid_selection[Number(val)-1].push(temp_selection[t])
                }
            }
    
            function bonusProperties(val) {
                num = Number(val)
                bonuses=makeArray(3)
                for (var r in bonuses){
                    r++
                    usedbonus = (r <= num) ? true : false
                    $('#bonusname'+r).prop('required',usedbonus)
                    $('#bonussrc'+r).prop('required',usedbonus)
                    $('#bonuscode'+r).prop('required',usedbonus)
                    $('#bonussound'+r).prop('required',usedbonus)
                }
                elements = [$('#bonusedit1'),$('#bonusedit2'),$('#bonusedit3')]
                modifyMultipleClass('a','visually-hidden',elements)
                $('#bonusedit'+num).removeClass('visually-hidden')
            }
            
            $('.bonus-polo-code').on('click', function(event){
                bonusUpdate($(this).attr('id').split('bonuspolocode')[1])
            })
            
            $('input[name="bonusesRadio"]').change(function(){ 
                if ($('input[name="bonusesRadio"]:checked').val() !== "0") {
                    $('#bonus-options').empty()
                    var val=$('input[name="bonusesRadio"]:checked').val()
                    choices=makeArray(val)
                    for (const c in choices) $('#bonus-options').append(`<option>${Number(c)+1}</option>`)
                    $('#bonusselector').removeClass('visually-hidden')
                    var val = $('#bonusselect')[0].selectedOptions[0].innerText
                    bonusProperties(val)
                } else {
                    elements=[$('#bonusedit1'),$('#bonusedit2'),$('#bonusedit3'),$('#bonusselector')]
                    modifyMultipleClass('a','visually-hidden',elements)
                    $('#bonus-options').empty()
                }
               
            })
            
            $('#bonusselect').on('mousemove',function(){
                var val = $(this)[0].selectedOptions[0].innerText
                bonusProperties(val)
            })
            
            $('#bonusselect').on('change',function(){
                var val = $(this)[0].selectedOptions[0].innerText
                bonusProperties(val)
            })
    
            
            // Polos
            function poloElements() {
                polocount = Number($('#polocount').val())
                prevcount = Number($("#pololist").children().length)
                newadjustment= polocount-prevcount
                polos = (newadjustment < 0) ? makeArray(-newadjustment) : ((newadjustment > 0) ? makeArray(newadjustment) : 0)
                if (newadjustment > 0) {
                    for (var r in polos){
                        r=Number(r)+1+prevcount
                        $('#pololist').append(`<div class="form-group m-3 visually-hidden" id="poloedit${r}"><div class="form-group m-3 col-md-3"><label for="poloname${r}">Polo Name</label><input class="form-control" type="text" id="poloname${r}" placeholder="polo"></div><div class="form-group m-3 col-md-3"><label for="polocolor${r}">Polo Bonus Circle & Loading Bar Color </label><input class="form-control" type="text" data-coloris id="polocolor${r}" value="#000000"></div><div class="form-group m-3 col-md-3"><label for="polouniqsnd${r}">Does this Polo have two unique sound files?</label><select id="polouniqsnd${r}" class="form-control form-select"><optgroup><option value="!1" selected="">True</option><option value="!0">False</option></optgroup></select></div></div>`)
                    }
                } else if (newadjustment < 0) {
                    for (var r in polos) {
                        $('#pololist').children().last().remove()
                    }
                }
            }
            
            function poloUpdates(val) {
                polocount = Number($('#polocount').val())
                polos = makeArray(polocount)
                for (var r in polos){
                    r++
                    $('#poloname'+r).prop('required',true)
                    $('#polocolor'+r).prop('required',true)
                    $('#polouniqsnd'+r).prop('required',true)
                    $('#poloedit'+r).addClass('visually-hidden')
                }
                if (val !== 0) $('#poloedit'+val).removeClass('visually-hidden')
            }
            
            $('#polocount').change(function(){ 
                $('#polo-options').empty()
                var val=Number($(this).val())
                if (val > 99 || val < 1) {
                    warning = "The amount of polos cannot be "
                    warning += (Number(val) > 99) ? 'greater than 99!' : 'less than 1!'
                    $('#bonusescontent-comment').removeClass('visually-hidden')
                    elements = [$('#bonuses-content'),$('#poloselector')]
                    modifyMultipleClass('a','visually-hidden',elements)
                    poloElements()
                    $(this).val("")
                    alert(warning)
                    return
                }
                
                choices=makeArray($('#polocount').val())
                $('#polo-options').empty()
                for (const c in choices){
                    $('#polo-options').append(`<option>${Number(c)+1}</option>`)
                }
                j=0
                $('.bonus-polo-code').each(function(i,obj) {
                    $(this).empty()
                    j++
                    i=0
                    r=1
                    a=-1
                    for (const c in choices){
                        i++
                        if (i===r) {
                            $(this).append(`<div class="row"></div>`)
                            r+=5
                            a++
                        }
                        $(this).children('div').eq(a).append(`<div class="form-check m-3 col"><label class="form-check-label" for="${Number(c)+1}polo-${j}">Polo ${Number(c)+1}</label><input class="form-check-input bonus-checkboxes-${j}" type="checkbox" id="${Number(c)+1}polo-${j}"></input></div>`)
                    }
                })
                
                var val = $('#poloselect')[0].selectedOptions[0].innerText
                $('#bonusescontent-comment').addClass('visually-hidden')
                elements = [$('#bonuses-content'),$('#poloselector')]
                modifyMultipleClass('r','visually-hidden',elements)
                poloElements()
                poloUpdates(val)
                
            })
            
            $('#poloselect').on('change',function(){
                var val = $(this)[0].selectedOptions[0].innerText
                poloElements()
                poloUpdates(val)
            })

            $('#poloselect').on('mousemove',function(){
                var val = $(this)[0].selectedOptions[0].innerText
                poloElements()
                poloUpdates(val)
            })
    

            // Imports and Field clears
            $('#import-input').on('click', async function(){
                error_log=""
                const options = {
                    toplevel: true,
                };
                var datainput = $('#appjs-import')[0];
                result = ""
                LoadTextFromDisk(datainput, async (text) => {
                    if (text === undefined) return error_log+="No file selected for App.js import!\n"
                    result = await Terser.minify(text, options);
                })
                if (error_log !== "") alert("Error Log:\n"+error_log)
                await waitFor(_ => result !== "")
                    
                if (result.error) return alert("Error: " + result.error)
                data=result.code.split('new function(){')[1]
                values = ['name','version','date','folder','spritepolo','spritepicto']
                number_values = ['looptime','bpm','totalframe','nbpolo','nbloopbonus','bonusloopA','bonusendloopA','recmaxloop','recminloop']
                for (x in number_values) {
                    x = number_values[x]
                    try{
                        tempdata = data.split(`this.${x}=`)[1].split(',')[0]
                        $(`#${x}`).val(tempdata).change()
                    } catch {
                        error_log+=`${x} was not found in the AppJS!\n`
                    }
                }
                for (x in values) {
                    x = values[x]
                    try{
                        $(`#${x}`).val(data.split(`this.${x}="`)[1].split('",')[0]).change()
                    } catch {
                        error_log+=`${x} was not found in the AppJS!\n`
                    }
                }
                colour_elements = ['colBck','col0','col1','col2','col3','col4']
                for (x in colour_elements) {
                    x = colour_elements[x]
                    try{
                        $(`#${x}`).val(data.split(`this.${x}="`)[1].split('",')[0])
                        document.querySelector(`#${x}`).dispatchEvent(new Event('input', { bubbles: true }));
                    } catch {
                        error_log+=`${x} was not found in the AppJS!\n`
                    }
                }
                colourUpdate()
    
                polos=data.split('this.animearray=[')[1].split('],this.bonusarray')[0].split('},')
                $('#polocount').val(polos.length)
                poloElements()
                i=0
                for (polo in polos) {
                    i++
                    polos=data.split('this.animearray=[')[1].split('],this.bonusarray')[0].split('},')
                    polonew=polos[polo]
                    poloname = polonew.split('name:"')[1].split('",')[0]
                    polocolor = polonew.split('color:"')[1].split('",')[0]
                    polouniqsnd = polonew.split('uniqsnd:')[1].split('}')[0]

                    $('#poloname'+i).val(poloname)
                    $('#polocolor'+i).val('#'+polocolor)
                    document.querySelector('#polocolor'+i).dispatchEvent(new Event('input', { bubbles: true }));
                    $('#polouniqsnd'+i).val(polouniqsnd)
                }
                
                j=0
                $('#polo-options').empty()
                choices=makeArray($('#polocount').val())
                for (const c in choices){
                    $('#polo-options').append(`<option>${Number(c)+1}</option>`)
                }
                $('.bonus-polo-code').each(function(i,obj) {
                    $(this).empty()
                    j++
                    i=0
                    r=1
                    a=-1
                    for (const c in choices){
                        i++
                        if (i===r) {
                            $(this).append(`<div class="row"></div>`)
                            r+=5
                            a++
                        }
                        $(this).children('div').eq(a).append(`<div class="form-check m-3 col"><label class="form-check-label" for="${Number(c)+1}polo-${j}">Polo ${Number(c)+1}</label><input class="form-check-input bonus-checkboxes-${j}" type="checkbox" id="${Number(c)+1}polo-${j}"></input></div>`)
                    }
                })

                bonus_split=data.split('this.bonusarray=[')[1]
                bonuses=bonus_split.split('];')[0].length > 0 ? bonus_split.split('],this')[0] : bonus_split.split('];')[0]
                bonuses=bonuses.split('},')
                q=0
                if (bonuses[0] !== ""){
                    $('#bonusselector').removeClass('visually-hidden')
                    for (var bonus in bonuses) {
                        bonus=bonuses[bonus]
                        q++
                        $('#bonusname'+q).val(bonus.split('name:"')[1].split('",')[0])
                        $('#bonussrc'+q).val(bonus.split('src:"')[1].split('",')[0])
                        bonussound = (bonus.split('sound:"')[1].split('",').length === 1) ? bonus.split('sound:"')[1].split('"}')[0] : bonus.split('sound:"')[1].split('",')[0]
                        bonusaspire = (bonus.split('sound:"')[1].split('",').length !== 1) ? bonus.split('aspire:"')[1].split('"')[0] : ""
                        $('#bonussound'+q).val(bonussound)
                        $('#bonusaspire'+q).val(bonusaspire)
                        bonuscode=bonus.split('code:"')[1].split('",')[0]
                        bonuscode=bonuscode.split(',')
                        for (var code in bonuscode) {
                            code = bonuscode[code]
                            $(`#${code}polo-${q}`).prop('checked',true)
                        }
                        last_valid_selection[q-1]=bonuscode
                    }
                }
    
                $('#bonusescontent-comment').addClass('visually-hidden')
                elements = [$('#bonuses-content'),$('#poloselector')]
                modifyMultipleClass('r','visually-hidden',elements)
                poloUpdates("1")
                if (q !== 0) {
                    $('#0bonuses').prop('checked',false)
                    $(`#${q}bonuses`).prop('checked',true)
                }
                choices=makeArray(q)
                for (const c in choices) $('#bonus-options').append(`<option>${Number(c)+1}</option>`)
                bonusUpdate(q)
                bonusProperties(q)
                if (error_log !== "") alert("Error Log:\n"+error_log)
            })
            $('#clear-input').on('click', function() {
                values = ['name','date','folder','looptime','bpm','totalframe','polocount']
                for (x in values) $(`#${values[x]}`).val('')
                $('#version').val("1").change()
                $('#nbpolo').val('7')
                $('#nbloopbonus').val('6')
                $('#bonusloopA').val("!0").change()
                $('#bonusendloopA').val("!0").change()
                $('#recmaxloop').val('27')
                $('#recminloop').val('4')
                $('#spritepolo').val('polo-sprite.png')
                $('#spritepicto').val('game-picto.png')
                colour_elements = ['colBck','col0','col1','col2','col3','col4']
                for (x in colour_elements) {
                    x = colour_elements[x]
                    $(`#${x}`).val(getRandomColor())
                    document.querySelector(`#${x}`).dispatchEvent(new Event('input', { bubbles: true }));
                }
                colourUpdate()
                $('#bonusescontent-comment').removeClass('visually-hidden')
                poloUpdates("1")
                $('#0bonuses').prop('checked',true)
                elements = [$('#bonusselector'),$('#poloselector'),$('#bonuses-content')]
                modifyMultipleClass('a','visually-hidden',elements)
                bonusProperties(0)
                $('#polo-options').empty()
                $('#bonus-options').empty()
                $('.bonus-polo-code').empty()
                i=0
                bonuses=makeArray(3)
                bonusValues = ['name','src','code','sound','aspire']
                for (b in bonuses) {
                    i++
                    for (x in bonusValues) {
                        $(`#bonus${bonusValues[x]}${i}`).val('')
                    }
                    $('#bonusedit'+i).addClass('visually-hidden')
                    $(`#${i}bonuses`).prop('checked',false)
                }
                i=0
                polos=makeArray(20)
                poloValues = ['name','color','uniqsnd']
                for (p in polos) {
                    i++
                    for (x in poloValues) {
                        $(`#polo${poloValues[x]}${i}`).val('')
                    }
                }
            })

            // Export
            $('#submission').on('click', function(){
                polos=[]
                polocount = Number($('#polocount').val())
                for (var i in [...Array(polocount).keys()]) {
                    i++
                    name=$('#poloname'+i).val()
                    color=$('#polocolor'+i).val()
                    color=color.replace('#','')
                    uniqsnd=$('#polouniqsnd'+i).find(':selected').val()
                    polos.push(`{name:"${name}",color:"${color}",uniqsnd:${uniqsnd}}`)
                    
                }
                bonuses=[]
                bonuscount = Number($('input[name="bonusesRadio"]:checked').val())
                for (var i in [...Array(bonuscount).keys()]) {
                    i++
                    name=$('#bonusname'+i).val()
                    src=$('#bonussrc'+i).val()
                    code=last_valid_selection[i-1].join(',')
                    sound=$('#bonussound'+i).val()
                    aspire=$('#bonusaspire'+i).val()
                    bonusdata = `{name:"${name}",src:"${src}",code:"${code}",sound:"${sound}"`
                    bonusdata += (!aspire) ? "}" : `,aspire:"${aspire}"}`
                    bonuses.push(bonusdata)
                }
                data=`/** Generated by sealldevelopers app.js generator **/\nvar app=new function(){this.name="${$('#name').val()}",this.version="${$('#version').find(':selected').val()}",this.date="${$('#date').val()}",this.folder="${$('#folder').val()}",this.looptime=${$('#looptime').val()},this.bpm=${$('#bpm').val()},this.totalframe=${$('#totalframe').val()},this.nbpolo=${$('#nbpolo').val()},this.nbloopbonus=${$('#nbloopbonus').val()},this.bonusloopA=${$('#bonusloopA').find(':selected').val()},this.bonusendloopA=${$('#bonusendloopA').find(':selected').val()},this.recmaxloop=${$('#recmaxloop').val()},this.recminloop=${$('#recminloop').val()},this.recmintime=Math.round(this.looptime/1e3)*this.recminloop,this.spritepolo="${$('#spritepolo').val()}",this.spritepicto="${$('#spritepicto').val()}",this.colBck="${$('#colBck').val()}",this.col0="${$('#col0').val()}",this.col1="${$('#col1').val()}",this.col2="${$('#col2').val()}",this.col3="${$('#col3').val()}",this.col4="${$('#col4').val()}",this.animearray=[${polos.join(',')}],this.bonusarray=[${bonuses.join(',')}],this.unlockerarray=[];for(var n=0,o=this.animearray.length;n<o;n++){var a=this.animearray[n].name;this.animearray[n].soundA=a+"_a",this.animearray[n].soundB=this.animearray[n].uniqsnd?a+"_a":a+"_b",this.animearray[n].anime=a+"-sprite.png",this.animearray[n].animeData=a+".json"}};`
                download('app.js',data)
            })
        
            
            // Init
            Coloris({
                alpha:false
            })
            colourUpdate()
        </script>
	</div>
    <h3 style="padding-bottom:5px"></h3>
    <h3 style="text-align:center;font-size:10px">Made by <a style="font-size:10px"target="_blank" rel="noopener noreferrer" class="enter">seal</a></h3>
</body>
</html>
